function c(t){$.get(`/payments/${t}`).done(function(n){const e=n.data,o=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.total_amount);$("#paymentCode").text(e.payment_code),$("#totalAmount").text(o),$("#paymentMethod").text(e.payment_method.name),$("#accountName").text(e.payment_method.account_name),$("#accountNumber").text(e.payment_method.account_number),$("#bankName").text(e.payment_method.bank_name);const a=n.payment_proof_url;$("#paymentProof").attr("src",a),$("#declineButton").data("payment-id",e.id),$("#approveButton").data("payment-id",e.id),e.status.toLowerCase()==="pending"?$(".modal-footer .btn").show():$(".modal-footer .btn").hide(),$("#paymentModal").modal("show")}).fail(function(){Swal.fire({icon:"error",title:"Error",text:"Unable to fetch payment details"})})}function i(t){Swal.fire({title:"Approve Payment",text:"Are you sure you want to approve this payment?",icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, approve it!"}).then(n=>{n.isConfirmed&&$.ajax({url:`/payments/${t}/approve`,type:"POST",data:{_token:$('meta[name="csrf-token"]').attr("content")},success:function(e){Swal.fire({icon:"success",title:"Approved!",text:"Payment has been approved successfully."}).then(()=>{location.reload()})},error:function(){Swal.fire({icon:"error",title:"Error",text:"Unable to approve payment"})}})})}function r(t){Swal.fire({title:"Decline Payment",text:"Are you sure you want to decline this payment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, decline it!"}).then(n=>{n.isConfirmed&&$.ajax({url:`/payments/${t}/decline`,type:"POST",data:{_token:$('meta[name="csrf-token"]').attr("content")},success:function(e){Swal.fire({icon:"success",title:"Declined!",text:"Payment has been declined successfully."}).then(()=>{location.reload()})},error:function(){Swal.fire({icon:"error",title:"Error",text:"Unable to decline payment"})}})})}$(document).ready(function(){$("#viewPaymentButton").on("click",function(){const t=$(this).data("payment-id");c(t)}),$("#approveButton").on("click",function(){const t=$(this).data("paymentId");i(t)}),$("#declineButton").on("click",function(){const t=$(this).data("paymentId");r(t)})});
