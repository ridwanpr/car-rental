function i(e){$.get(`/payments/${e}`).done(function(n){const t=n.data;console.log(t);const o=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.total_amount);$("#paymentCode").text(t.payment_code),$("#totalAmount").text(o),$("#paymentMethod").text(t.payment_method.name),$("#accountName").text(t.payment_method.account_name),$("#accountNumber").text(t.payment_method.account_number),$("#bankName").text(t.payment_method.bank_name),$("#customerName").text(t.user.name),$("#customerEmail").text(t.user.email),$("#customerPhone").text(t.user_phone);const a=n.payment_proof_url;$("#paymentProof").attr("src",a),$("#declineButton").data("payment-id",t.id),$("#approveButton").data("payment-id",t.id),t.status.toLowerCase()==="pending"||t.status.toLowerCase()==="waiting confirmation"?$(".modal-footer .btn").show():$(".modal-footer .btn").hide(),$("#paymentModal").modal("show")}).fail(function(){Swal.fire({icon:"error",title:"Error",text:"Unable to fetch payment details"})})}function r(e){Swal.fire({title:"Approve Payment",text:"Are you sure you want to approve this payment?",icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, approve it!"}).then(n=>{n.isConfirmed&&$.ajax({url:`/payments/${e}/approve`,type:"POST",data:{_token:$('meta[name="csrf-token"]').attr("content")},success:function(t){Swal.fire({icon:"success",title:"Approved!",text:"Payment has been approved successfully."}).then(()=>{location.reload()})},error:function(){Swal.fire({icon:"error",title:"Error",text:"Unable to approve payment"})}})})}function c(e){Swal.fire({title:"Decline Payment",text:"Are you sure you want to decline this payment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, decline it!"}).then(n=>{n.isConfirmed&&$.ajax({url:`/payments/${e}/decline`,type:"POST",data:{_token:$('meta[name="csrf-token"]').attr("content")},success:function(t){Swal.fire({icon:"success",title:"Declined!",text:"Payment has been declined successfully."}).then(()=>{location.reload()})},error:function(){Swal.fire({icon:"error",title:"Error",text:"Unable to decline payment"})}})})}$(document).on("click","#viewPaymentButton",function(){const e=$(this).data("payment-id");i(e)});$(document).on("click","#approveButton",function(){const e=$(this).data("payment-id");r(e)});$(document).on("click","#declineButton",function(){const e=$(this).data("payment-id");c(e)});
