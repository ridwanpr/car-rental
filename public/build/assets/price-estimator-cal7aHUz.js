$(document).ready(function(){const o=L.map("map").setView([-6.2867,106.8087],10);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(o);let n=[];const l=$("#distance"),s=$("#fuel-cost"),i=$("#total-price");function f(e){if(n.length<2){const t=L.marker(e.latlng).addTo(o);n.push(t),n.length===2&&u()}else a()}o.on("click",f);function p(){if(n.length===2){const e=n[0].getLatLng(),t=n[1].getLatLng();return o.distance(e,t)/1e3}return 0}function g(e){const t=parseFloat($("#fuel-consumption").val())||12,c=parseFloat($("#fuel-price").val())||1e4;return e/t*c}function m(){return parseFloat($("#rent-price").val())||0}function h(e,t){return e+t}function r(e){return e.toLocaleString("id-ID",{style:"currency",currency:"IDR"})}function u(){const e=p(),t=g(e),c=m(),d=h(t,c);l.text(e.toFixed(2)),s.text(r(t)),i.text(r(d))}function a(){n.forEach(e=>e.remove()),n=[],l.text("0.00"),s.text("0.00"),i.text(r(0))}$("#reset-map").click(a);const y=L.Control.Geocoder.nominatim();L.Control.geocoder({query:"",placeholder:"Search for a place...",errorMessage:"Address not found!",geocoder:y}).on("markgeocode",function(e){const t=e.geocode.center;if(n.length<2){const c=L.marker(t).addTo(o);n.push(c),n.length===2&&u()}else a()}).addTo(o)});
